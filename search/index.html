<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Blog Name</title>
    <meta name="description" content="I am writing about my experiences as a naval navel-gazer.">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/11ty-humbly/feed.xml" type="application/atom+xml" title="Your Blog Name">
    <link rel="alternate" href="/11ty-humbly/feed.json" type="application/json" title="Your Blog Name">
  </head>
  <body>
    <nav id="nav-header">
      <button class="trigger" onclick="toggle('nav')"><span></span><span></span><span></span></button>
      <ul class="nav-list hide" id="nav">
        <li class="nav-item">
          <a href="/11ty-humbly/">Home</a>
        </li>
        <li class="nav-item">
          <a href="/11ty-humbly/posts/">Archive</a>
        </li>
        <li class="nav-item">
          <a href="/11ty-humbly/about/">About Me</a>
        </li>
        <li class="search">
          <a href="/search">Search</a>
        </li>
      </ul>
    </nav>

    <header>
			<img src="https://via.placeholder.com/150" class="logo">
      <a class="title" href="/11ty-humbly/">Your Blog Name</a>
      <p class="description">" I am writing about my experiences as a naval navel-gazer. "</p>
    </header>

    <main>
      <style type="text/css">
	#search-form input {
		padding: 10px;
		border: 1px solid #ddd;
	}
	#search-form button {
		padding: 10px;
		border: none;
		background: #515689;
		color: #fff;
		cursor: pointer;
	}
</style>

<div class="info">
	<form id="search-form">
		<input type="text" value="" id="search-query" placeholder="Type a keyword" />
		<button>Search</button>
	</form>
</div>
<article id="search-result"></article>

<script src="https://unpkg.com/lunr@2.3.9/lunr.min.js"></script>
<script>

const docs = [
	
	{
		"url": "/posts/firstpost/",
		"title": "This is my first post.",
		"description": "This is a post on My Blog about agile frameworks."
  } ,
	
	{
		"url": "/posts/secondpost/",
		"title": "This is my second post.",
		"description": "This is a post on My Blog about leveraging agile frameworks."
  } ,
	
	{
		"url": "/posts/thirdpost/",
		"title": "This is my third post.",
		"description": "This is a post on My Blog about win-win survival strategies."
  } ,
	
	{
		"url": "/posts/fourthpost/",
		"title": "This is my fourth post.",
		"description": "This is a post on My Blog about touchpoints and circling wagons."
  } 
	
]
document.getElementById('search-form').onsubmit = function (e) {
	e.preventDefault()
	let results = []
	const idx = lunr(function () {
		this.ref('id')
		this.field('title')
		this.field('description')

		docs.forEach(function (doc, idx) {
			doc.id = idx
			this.add(doc)
		}, this)
	})
	const q = document.getElementById('search-query').value
	if (q !== '') results = idx.search(q)
	results.map(r => ({
		...r,
		title: docs[r.ref].title,
		url: docs[r.ref].url
	}))
	
	const result = document.getElementById('search-result')
	if (results.length) {
		const posts = []
		posts.push(`<div class="message">Found ${results.length} posts</div>`)
		results.forEach(({ ref }) => {
			const url = docs[ref].url
			const title = docs[ref].title
			const description = docs[ref].description
			posts.push(`
			<div class="post">
				<h2 class="title" rel="bookmark" title="${title}">
					<a href="${url}">${title}</a>
				</h2>
					<div class="content">${description}</div>
			</div>
			`)
		})
		result.innerHTML = posts.join('')
	} else {
		result.innerHTML = '<div class="message">No post found</div>'
	}
}
</script>
    </main>

    <footer>
      Template <a href="//github.com/bramaudi/11ty-humbly" target="_blank"><b>Humbly</b></a> Design <br>
      Created by <a href="//github.com/bramaudi" target="_blank">Brama Udi</a>
    </footer>
    
    <script>
    function toggle(id){
      var el = document.getElementById(id);
      el.classList.toggle('hide');
    }
    </script>

    <!-- Current page: /11ty-humbly/search/ -->
  </body>
</html>
